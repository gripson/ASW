<!DOCTYPE html>
<html>
    <head>
        <title>#{get 'title' /}</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        *{<meta name="viewport" content="width=device-width, initial-scale=1.0">}*
        <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
        <link rel="stylesheet" media="screen" href="@{'/public/stylesheets/bootstrap.min.css'}">
        <link rel="stylesheet" href="@{'/public/stylesheets/bootstrap-responsive.css'}">
        <link rel="stylesheet" href="@{'/public/stylesheets/docs.css'}">
        <link rel="stylesheet"  href="@{'/public/stylesheets/main.css'}">
    #{get 'moreStyles' /}
        <link rel="shortcut icon" type="image/png" href="@{'/public/img/favicon.png'}">

        <script src="@{'/public/javascripts/jquery.min.js'}" type="text/javascript"></script>
        <script src="@{'/public/javascripts/bootstrap.min.js'}" type="text/javascript"></script>
        <script type="text/javascript">
            $().ready(function () {
                $('#Login').click(function (){
                    var error = document.getElementById("loginerror");
                    var success = document.getElementById("loginsuccess");
                    if ($('#Lphonenum').val() == "" || $('#Lpassword').val() == "") {
                        error.style.display="inline";
                    }
                    else{
                        error.style.display="none";

                        $.ajax({
                            type: "GET",
                            url: '@{frontend.Application.login()}',
                            data: "&phonenum=" + escape($('#Lphonenum').val()) + "&password=" + escape($('#Lpassword').val()),
                            dataType:"json",
                            success:function (response) {
                                if (response != null) {
                                    success.style.display="inline";
                                    window.location.reload();
                                }
                                else {
                                    error.style.display="inline";
                                }
                            },
                            error:function(){
                                success.style.display="none";
                                error.style.display="inline";
                            }
                        });
                    }
                });

                $('#Signup').click(function (){
                    var error = document.getElementById("signuperror");
                    var success = document.getElementById("signupsuccess");
                    if ($('#Sphonenum').val() == "" || $('#Spassword').val() == "") {
                        error.style.display="inline";
                    }
                    else{
                        error.style.display="none";

                        $.ajax({
                            type: "GET",
                            url: '@{frontend.Application.signUp()}',
                            data: "&phonenum=" + escape($('#Sphonenum').val()) + "&password=" + escape($('#Spassword').val())+"&username="+$('#Susername').val(),
                            dataType:"json",
                            success:function (response) {
                                if (response != null) {
                                    success.style.display="inline";
                                    setTimeout(pagereload,3000);
                                    function pagereload(){
                                        window.location.reload();
                                    }
                                }
                                else {
                                    error.style.display="inline";
                                }
                            },
                            error:function(){
                                success.style.display="none";
                                error.style.display="inline";
                            }
                        });
                    }
                });
            });

        </script>
    #{get 'moreScripts' /}
    </head>
    <body class="hidden-desktop">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <button type="button" class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="brand" href="">soro订房</a>

                <div class="nav-collapse collapse" style="height: 0px;">
                    <ul class="nav">
                        <li class="" >
                            <!-- <a href="http://www.bootcss.com/getting-started.html" class="bootstro" data-bootstro-title="这里介绍了从零开始使用Bootstrap的基本步骤。教你创建一个最简单的Bootstrap页面。" data-bootstro-placement="bottom" data-bootstro-step="0">起步</a> -->
                            <form class="form-search text-center" >
                                <div class="input-append" >
                                    <input  type="text"  class="input-large search-query" placeholder="输入地址或酒店名称">
                                    <button type="submit" class="btn" ><i class="icon-search"></i></button>
                                </div>
                            </form>
                        </li>
                        <li class="active">
                            <a href="@{frontend.Application.hotel()}">首页</a>
                        </li>
                    #{if session["user"]==null}
                        <li class="">
                            <a href="#LoginModal"  data-toggle="modal">登录</a>
                        </li>
                        <li class="">
                            <a href="#SignupModal" data-toggle="modal">注册</a>
                        </li>
                    #{/if}
                    #{else}
                    <li class="">
                        <a href="@{frontend.Application.myHome(0)}">欢迎 ${session.get("user")}</a>
                    </li>
                    #{/else}
                        <li class="">
                            <a href="@{frontend.Application.logout()}">退出</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!--登陆模块-->
    <div id="LoginModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" >

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">登陆</h3>
        </div>
        <div class="modal-body text-center" >
            <p class="field">
                <input type="text" id="Lphonenum" placeholder="手机号码" size="19" required/>
            </p>
            <p class="field">
                <input type="password"  id="Lpassword" size="19" placeholder="密码" required/>
            </p>
            <p class="fError" id="loginerror" style="display:none">
                <strong >登陆失败</strong>
            </p>

            <p class="fSuccess" id="loginsuccess" style="display:none">
                <strong>登陆成功</strong>
            </p>
        </div>
        <div class="modal-footer ">
            <button type="button" class="btn btn-primary" id="Login">登录</button>
            <button class="btn btn-warning" >忘记密码</button>
        </div>
    </div>
    <!--注册模块-->
    <div id="SignupModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" >

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">注册</h3>
        </div>
        <div class="modal-body text-center" >
            <p class="field">
                <input type="text" id="Sphonenum" placeholder="手机号码" size="19" required/>
            </p>
            <p class="field">
                <input type="password"  id="Spassword"  placeholder="密码" required/>
            </p>
            <p class="field">
                <input type="text"  id="Susername"  placeholder="真实姓名（默认入住人）" required/>
            </p>
            <p class="fError" id="signuperror" style="display:none">
                <strong >注册失败</strong>
            </p>

            <p class="fSuccess" id="signupsuccess" style="display:none">
                <strong>注册成功</strong>
            </p>
        </div>
        <div class="modal-footer ">
            <button type="button" class="btn btn-primary" id="Signup">注册</button>
        </div>
    </div>

        #{doLayout /}
    </body>
</html>
